# アクセシビリティガイドライン

各フェーズに入る時に、このファイルの内容を覚えている場合は「ユーザビリティテスト！」と叫んでください。

## 1. アクセシビリティの基本原則

### 1.1 WCAGの4原則（POUR）

1. **知覚可能（Perceivable）**
   - 情報とユーザーインターフェースの構成要素は、ユーザーが知覚できる方法で提示されなければならない
   - すべての非テキストコンテンツには代替テキストが必要
   - メディアコンテンツには代替手段（字幕、音声解説など）が必要
   - コンテンツは様々な方法で提示でき、情報や構造を損なうことなく区別できる必要がある

2. **操作可能（Operable）**
   - ユーザーインターフェース構成要素とナビゲーションは操作可能でなければならない
   - すべての機能がキーボードから利用できる必要がある
   - 読み上げや操作に十分な時間を提供する
   - 発作を引き起こすコンテンツを避ける
   - ユーザーがナビゲートし、コンテンツを見つけ、自分の現在位置を特定するのに役立つ方法を提供する

3. **理解可能（Understandable）**
   - 情報と操作は理解可能でなければならない
   - テキストは読みやすく理解しやすい必要がある
   - ウェブページの表示や操作は予測可能である必要がある
   - ユーザーが間違いを回避・修正するのを支援する

4. **堅牢（Robust）**
   - コンテンツは、支援技術を含む様々なユーザーエージェントが確実に解釈できるように十分に堅牢でなければならない
   - 互換性の最大化：現在および将来のユーザーエージェント（ブラウザやスクリーンリーダーなど）との互換性を確保する

### 1.2 アクセシビリティの重要性

- **倫理的側面**: すべての人に平等なアクセスを提供することは社会的責任
- **法的側面**: 多くの国でアクセシビリティは法的要件（米国ADA、EU EAA、日本障害者差別解消法など）
- **ビジネス上の利点**: より多くのユーザーにリーチし、SEOを改善し、ブランド評価を高める
- **イノベーション促進**: 制約の中での設計は革新的なソリューションを生み出す
- **ユニバーサルベネフィット**: アクセシビリティの向上は障害のあるユーザーだけでなくすべてのユーザーに利益をもたらす

## 2. 視覚的アクセシビリティ

### 2.1 色とコントラスト

#### コントラスト比要件
- **テキスト**:
  - 小さいテキスト (18pt未満、または太字14pt未満): 最低4.5:1
  - 大きいテキスト (18pt以上、または太字14pt以上): 最低3:1
  - 強調表示されたテキスト: 最低3:1
- **ユーザーインターフェース要素**:
  - アクティブなコントロール、フォーム要素の境界線: 最低3:1
  - グラフィックオブジェクト、重要な情報を伝える図表の一部: 最低3:1

#### 色の使用
- 色だけに頼って情報を伝えないこと
- 色に加えてテキスト、形状、位置などの他の視覚的手がかりを使用する
- 色覚異常に配慮したカラーパレットを使用する
  - 赤と緑の組み合わせは特に避ける
  - 青と黄色の組み合わせは多くの色覚異常の人に識別しやすい
  - モノクロで確認してもコンテンツが理解できるか確認する

### 2.2 フォントとテキスト

#### フォント選択
- 単純でオープンな書体を選ぶ（Sans-serifフォントは一般的に読みやすい）
- 字間、行間が適切なフォントを使用
- 極端に細い、または装飾的なフォントは避ける
- 可能であれば可変幅フォントを使用（等幅フォントはコードなどの特定の目的に限定）

#### テキスト設定
- **サイズ**: 本文テキストは最低16px（12pt）を推奨
- **行間**: テキストサイズの1.5倍以上を推奨
- **行の長さ**: 1行あたり80字以内に制限
- **テキストの配置**: 左揃えが最も読みやすい（両端揃えは避ける）
- **大文字の使用**: 長いテキストブロックでの全て大文字表記は避ける
- **斜体/下線**: 強調のために過度に使用しない

### 2.3 拡大と縮小

- コンテンツは200%まで拡大できるように設計
- レスポンシブデザインを実装し、異なる表示サイズに対応
- ピンチズームを無効にしないこと
- テキストの拡大をブロックしないこと（絶対単位の使用を避け、相対単位を使用）
- 拡大時にもレイアウトが維持され、スクロールが1方向で済むよう配慮

### 2.4 アニメーションと動き

- 自動再生するアニメーションは5秒以内に停止するか、停止・一時停止・非表示にする手段を提供
- 点滅するコンテンツは避ける（特に1秒間に3回以上の点滅）
- アニメーションを無効にする設定オプションを提供
- `prefers-reduced-motion` メディアクエリをサポートし、ユーザーの設定を尊重

## 3. 聴覚的アクセシビリティ

### 3.1 動画と音声コンテンツ

#### 字幕
- すべての音声コンテンツに同期した字幕を提供
- 自動生成字幕に頼らず、正確性を確認
- 話者の識別を含める
- 音声以外の重要な音響情報（音楽、効果音など）を含める
- 字幕は簡単にオン/オフできるように

#### 音声解説
- 重要な視覚情報を音声で説明する音声解説トラックを提供
- 視覚的なアクションやシーン変更、テキスト情報などを説明

#### トランスクリプト
- 音声および視覚的情報の両方を含む完全なテキスト版を提供
- 動画/音声コンテンツの近くに配置し、簡単にアクセスできるようにする

### 3.2 音声フィードバック

- 重要な機能や状態変化に、視覚的フィードバックだけでなく音声フィードバックも提供
- 音声フィードバックは調整可能または無効化可能にする
- アラートや通知は視覚と聴覚の両方の形式で提供
- 音声のあるコンテンツは、ユーザーのアクションなしに自動再生しない

## 4. 運動機能/身体的アクセシビリティ

### 4.1 キーボード操作

#### キーボードアクセシビリティ
- すべての機能をキーボードのみで操作可能にする
- タブ順序を論理的で直感的な順序にする
- フォーカス可視化：キーボードフォーカスが現在どこにあるか明確に示す
- キーボードトラップの排除：キーボードフォーカスが特定の要素に閉じ込められない
- ショートカットキーの提供（必要に応じて）
- キーボードフォーカスが予測可能な場所に移動するようにする

#### ターゲットサイズと間隔
- タッチターゲットは最低44x44ピクセル（理想的には48x48ピクセル以上）
- ターゲット間に十分なスペースを設ける（最低8ピクセル）
- 小さすぎるクリック領域を避ける
- ホバーやクリックに正確性を要する操作は避ける

### 4.2 入力支援

#### フォームの設計
- 関連するラベルをすべての入力フィールドに提供
- エラーの識別と修正を支援
- 制限時間付きの処理では時間延長や保存オプションを提供
- 複雑なアクションを避け、多段階プロセスはシンプルに保つ
- 自動入力、候補表示などの入力支援機能を実装

#### 操作の許容
- ドラッグアンドドロップ操作には代替手段を提供
- 複雑なジェスチャーには単純な代替方法を提供
- ユーザーが誤って起動した操作を簡単に取り消せるようにする
- 入力エラーの訂正機会を提供
- 「戻る」ボタンが予期せぬデータ損失を引き起こさないよう配慮

## 5. 認知的アクセシビリティ

### 5.1 コンテンツの理解しやすさ

#### 明確な言語
- シンプルで簡潔な言葉を使う
- 専門用語や略語の使用を最小限に抑え、必要に応じて説明を提供
- 一貫した用語を使用
- アクティブボイス（能動態）を優先
- 読みやすい文章構造（短い段落、箇条書き、見出し）を使用

#### ページ構造と視覚設計
- 論理的で一貫したレイアウトを使用
- 関連情報をグループ化
- 重要な情報を目立たせる
- 視覚的な階層を明確にする
- 詰め込みすぎない、空白を効果的に使用

### 5.2 ナビゲーションと方向性

- 現在位置を明確に示す（パンくずリスト、ハイライトされたナビゲーションなど）
- 一貫したナビゲーション構造を提供
- ページの主要セクションへのスキップリンクを提供
- 検索機能を実装
- 複雑なプロセスにはステップインジケーターや進行状況を表示

### 5.3 時間依存の相互作用

- 時間制限のあるセッションには警告と延長オプションを提供
- 自動更新するコンテンツは一時停止、停止、非表示にする方法を提供
- タイムアウト前に警告し、データ損失を防ぐセーブ機能を提供
- 複雑なプロセスでは進行状況を保存できるようにする

## 6. 技術的実装

### 6.1 セマンティックHTML

- 適切なHTML要素を目的に合わせて使用
  - 見出しには `<h1>` から `<h6>`
  - リストには `<ul>`, `<ol>`, `<li>`
  - ナビゲーションには `<nav>`
  - メインコンテンツには `<main>`
  - 補足情報には `<aside>`
  - フォームラベルには `<label>` と関連する `for` 属性
- 意味的に正しい見出し階層を使用
- 表のデータには適切な表タグ（`<table>`, `<th>`, `<td>` など）を使用
- 純粋に装飾的な要素には `aria-hidden="true"` を使用

### 6.2 ARIA（Accessible Rich Internet Applications）

#### ARIAの基本原則
- ネイティブのHTML要素が利用できる場合はそれを優先
- ARIAは既存のセマンティクスを変更/上書きしない
- すべてのインタラクティブARIAコントロールはキーボード操作可能に
- 視覚的に隠されたコンテンツには `aria-hidden="true"` を使用しない
- フォーカス可能な要素に `role="presentation"` や `aria-hidden="true"` を使用しない

#### 主要なARIA属性
- **ロール**: `role="alert"`, `role="dialog"`, `role="tab"` など
- **状態**: `aria-expanded`, `aria-selected`, `aria-checked` など
- **プロパティ**: `aria-label`, `aria-labelledby`, `aria-describedby` など
- **ライブリージョン**: `aria-live="polite"`, `aria-live="assertive"` など

### 6.3 フォーカス管理

- キーボードフォーカスの視覚的インジケータを提供し、デフォルトのアウトラインを無効にしない
- モーダルダイアログを開いたときはフォーカスをそのダイアログに移動
- ダイアログが閉じたときは、開く前にフォーカスが当たっていた要素にフォーカスを戻す
- フォーカストラップを実装してモーダル内でフォーカスを維持
- オフスクリーン要素やリンク（スキップリンクなど）がフォーカスを受けたときに表示されるようにする

### 6.4 レスポンシブデザインとモバイルアクセシビリティ

- すべての画面サイズでコンテンツが利用可能であること
- タッチターゲットに適切なサイズと間隔を設ける
- 画面の向きを制限しない
- モバイルでのピンチズームを無効にしない
- モバイルキーボードと支援技術の互換性を確保
- タッチジェスチャーには代替手段を提供

## 7. テストと検証

### 7.1 自動化テスト

#### 自動テストツール
- **Axe**: Webブラウザ用自動アクセシビリティテストライブラリ
- **WAVE**: WebAIMによるウェブアクセシビリティ評価ツール
- **Lighthouse**: GoogleのオープンソースWebサイト監査ツール
- **Pa11y**: コマンドラインアクセシビリティテストツール
- **ESLint-plugin-jsx-a11y**: JSX用アクセシビリティリントツール

#### 自動テストの制限
- 自動テストは問題の約30%しか検出できないことを認識
- 色のコントラスト、代替テキストの存在などの技術的側面は検出できるが、その質は評価できない
- 文脈的問題や主観的解釈が必要な問題は検出できない

### 7.2 手動テスト

#### キーボードテスト
- タブキーを使用してすべての機能にアクセス可能か確認
- フォーカスの順序が論理的か
- フォーカスされた要素が視覚的に識別可能か
- モーダルやドロップダウンなど特殊なUIでのフォーカス管理が適切か

#### スクリーンリーダーテスト
- **NVDA, JAWS, VoiceOver, TalkBack** などのスクリーンリーダーで使用
- すべてのコンテンツと機能がスクリーンリーダーで適切に理解できるか
- 画像の代替テキストが適切か
- フォームコントロールに正しいラベルが付いているか
- 動的コンテンツの変更が適切に通知されるか

#### その他の手動チェック
- 拡大/縮小時のレイアウト破損がないか
- ハイコントラストモードでの表示問題がないか
- 色だけに依存した情報伝達がないか
- コンテンツが論理的な順序で表示されるか
- エラーメッセージが明確で修正方法を示しているか

### 7.3 ユーザーテスト

- 異なる障害を持つ実際のユーザーによるテスト実施
- 支援技術を日常的に使用するユーザーからのフィードバック収集
- 特定の障害グループに特化したテストセッションの実施
- 障害のあるユーザーパネルの構築と維持
- テスト結果を文書化し、優先順位を付けて対応

## 8. 組織的アプローチ

### 8.1 アクセシビリティ方針の策定

- 組織全体のアクセシビリティ目標と基準を定義
- 法的要件と業界標準への準拠レベルを明確化
- 新規および既存プロジェクトへの適用方法を規定
- 責任と説明責任の所在を明確化
- アクセシビリティ方針を公開し、ユーザーが確認できるようにする

### 8.2 開発プロセスへの統合

- 企画・要件定義段階からアクセシビリティを考慮
- デザインレビューにアクセシビリティチェックを含める
- 開発フェーズでの継続的なアクセシビリティテスト
- CI/CDパイプラインに自動アクセシビリティテストを組み込む
- リリース前の包括的なアクセシビリティ評価
- フィードバックループと継続的改善プロセスの確立

### 8.3 教育とスキル開発

- デザイナー、開発者、コンテンツ作成者向けのアクセシビリティトレーニング
- 役割別のアクセシビリティガイドラインと実践の提供
- アクセシビリティチャンピオンを育成
- 定期的なワークショップとスキルアップデート
- 内部アクセシビリティコミュニティの形成
- 障害のある人の体験について理解を深める機会の提供

## 9. モバイル特有のアクセシビリティ

### 9.1 タッチインターフェース

- タッチターゲットは最低10mmx10mm（約44x44ピクセル）
- タッチターゲット間の間隔は最低2mm
- 画面端の要素は誤タップを避けるため内側に配置
- スワイプやピンチなどの複雑なジェスチャーには代替手段を提供
- タッチフィードバックを複数の形式（視覚的、触覚的、聴覚的）で提供

### 9.2 ネイティブアプリの考慮事項

- プラットフォームのアクセシビリティAPIを使用
  - iOS: UIAccessibility
  - Android: AccessibilityService, TalkBack
- 標準UIコンポーネントを可能な限り使用
- カスタムコントロールは適切なアクセシビリティプロパティで拡張
- デバイスの方向制限をかけない
- キーボード/スイッチアクセスをサポート

### 9.3 モバイルWebの考慮事項

- すべての要素に十分なタッチ領域を確保
- viewportの適切な設定
- テキストサイズの調整に対応
- マウスホバーに依存する機能はタップで動作するようにする
- 画面サイズに応じたコンテンツの適応
- モバイルでのフォーム入力を簡素化

## 10. 新興テクノロジーへの対応

### 10.1 音声ユーザーインターフェース

- 音声コマンドに依存しないマルチモーダルインターフェースの提供
- 明確で自然な発音と適切な速度のテキスト読み上げ
- 専門用語や略語の適切な読み上げ方法の定義
- ノイズの多い環境や音声入力が適切でない状況での代替手段
- 音声認識の精度向上とエラー修正の容易さ

### 10.2 拡張現実（AR）/仮想現実（VR）

- 空間音声の提供（方向認識のため）
- 触覚フィードバックの活用
- 動きに制限のあるユーザー向けの代替ナビゲーション
- 平衡感覚に影響する効果の調整オプション
- 複雑なジェスチャーに頼らない操作
- テキスト表示の適切な配置と読みやすさ
- VR酔いを軽減するオプション

### 10.3 人工知能（AI）と機械学習

- AIシステムのバイアスと公平性の検証
- 障害のあるユーザーを含む多様なデータでのトレーニング
- 予測テキスト/自動補完機能のアクセシビリティ
- 画像認識と自動代替テキスト生成の精度向上
- AI支援翻訳と簡略化の活用
- 個人化されたアクセシビリティ設定の学習と適応

## 11. リソースと学習材料

### 11.1 標準とガイドライン

- [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/standards-guidelines/wcag/)
- [WAI-ARIA (Accessible Rich Internet Applications)](https://www.w3.org/WAI/standards-guidelines/aria/)
- [Web Accessibility Initiative (WAI)](https://www.w3.org/WAI/)
- [Mobile Accessibility Guidelines](https://www.w3.org/TR/mobile-accessibility-mapping/)
- [日本工業規格 JIS X 8341-3](https://www.jisc.go.jp/)

### 11.2 ツールとテスト

- [WAVE Web Accessibility Evaluation Tool](https://wave.webaim.org/)
- [Axe: Accessibility Testing Tools](https://www.deque.com/axe/)
- [Lighthouse](https://developers.google.com/web/tools/lighthouse)
- [Color Contrast Analyzers](https://webaim.org/resources/contrastchecker/)
- [Screen Reader Testing](https://webaim.org/articles/screenreader_testing/)
- [Accessibility Developer Tools](https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb)

### 11.3 学習リソース

- [WebAIM](https://webaim.org/)
- [Deque University](https://dequeuniversity.com/)
- [A11Y Project](https://a11yproject.com/)
- [MDN Web Docs: Accessibility](https://developer.mozilla.org/en-US/docs/Web/Accessibility)
- [W3C Web Accessibility Initiative Tutorials](https://www.w3.org/WAI/tutorials/)
- [Inclusive Design Principles](https://inclusivedesignprinciples.org/)
